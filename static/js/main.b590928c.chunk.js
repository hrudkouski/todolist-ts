(this["webpackJsonpit-incubator-todolist-ts"]=this["webpackJsonpit-incubator-todolist-ts"]||[]).push([[0],{124:function(t,e,n){},149:function(t,e,n){},171:function(t,e,n){},197:function(t,e,n){"use strict";n.r(e);var a=n(0),c=n.n(a),i=n(10),r=n.n(i);n(149),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var o,s,d=n(17),l=n(85),u=n(44),j=n(7),b=n(118),f=n.n(b).a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"API-KEY":"3af7a44d-0a6b-4bf7-b34b-b5730fa5756f"}});!function(t){t[t.New=0]="New",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t[t.Draft=3]="Draft"}(o||(o={})),function(t){t[t.Low=0]="Low",t[t.Middle=1]="Middle",t[t.Hi=2]="Hi",t[t.Urgently=3]="Urgently",t[t.Later=4]="Later"}(s||(s={}));var O=function(){return f.get("todo-lists")},h=function(t){return f.post("todo-lists",{title:t})},p=function(t){return f.delete("todo-lists/".concat(t))},m=function(t,e){return f.put("todo-lists/".concat(e),{title:t})},g=function(t){return f.get("todo-lists/".concat(t,"/tasks"))},x=function(t,e){return f.post("todo-lists/".concat(e,"/tasks"),{title:t})},v=function(t,e){return f.delete("todo-lists/".concat(e,"/tasks/").concat(t))},k=function(t,e,n){return f.put("todo-lists/".concat(t,"/tasks/").concat(e),n)},T=function(t){return f.post("auth/login",t)},y=function(){return f.get("auth/me")},C=function(){return f.delete("auth/login")},I=function(t,e){t.messages.length?e(P(t.messages[0])):e(P("Some error occurred")),e(F("failed"))},L=function(t,e){e(P(t.message)),e(F("failed"))},S="todolist-ts/login-reducer/SET_IS_LOGGED_IN",w={isLoggedIn:!1},E=function(t){return{type:S,value:t}},_="todolist-ts/app-reducer/SET_STATUS",D="todolist-ts/app-reducer/SET_ERROR",A="todolist-ts/app-reducer/SET_INITIALIZED",N={status:"idle",error:null,isInitialized:!1},P=function(t){return{type:D,error:t}},F=function(t){return{type:_,status:t}},R=function(){return function(t){t(F("loading")),y().then((function(e){0===e.data.resultCode?(t(E(!0)),t(F("succeeded"))):I(e.data,t)})).catch((function(e){L(e,t)})).finally((function(){t({type:A,isInitialized:!0})}))}},z="todolist-ts/todolists-reducer/SET_TODOLISTS",H="todolist-ts/todolists-reducer/ADD_TODOLIST",K="todolist-ts/todolists-reducer/REMOVE_TODOLIST",M="todolist-ts/todolists-reducer/CHANGE_TODOLIST_TITLE",G="todolist-ts/todolists-reducer/CHANGE_TODOLIST_FILTER",U="todolist-ts/todolists-reducer/CHANGE_TODOLIST_ENTITY_STATUS",q=[],B=function(t,e){return{type:U,id:t,entityStatus:e}},Z=function(){return function(t){t(F("loading")),O().then((function(e){var n;t((n=e.data,{type:z,todolists:n})),t(F("succeeded"))})).catch((function(e){L(e,t)}))}},V=function(t){return function(e){e(F("loading")),h(t).then((function(t){var n;0===t.data.resultCode?(e((n=t.data.data.item,{type:H,todolist:n})),e(F("succeeded"))):I(t.data,e)})).catch((function(t){L(t,e)}))}},J=function(t){return function(e){e(F("loading")),e(B(t,"loading")),p(t).then((function(n){0===n.data.resultCode?(e({type:K,id:t}),e(F("succeeded"))):(I(n.data,e),e(B(t,"failed")))})).catch((function(n){L(n,e),e(B(t,"failed"))}))}},W=function(t,e){return function(n){n(F("loading")),n(B(e,"loading")),m(t,e).then((function(a){0===a.data.resultCode?(n(function(t,e){return{type:M,id:t,title:e}}(e,t)),n(F("succeeded")),n(B(e,"succeeded"))):(I(a.data,n),n(B(e,"failed")))})).catch((function(t){L(t,n),n(B(e,"failed"))}))}},Y="todolist-ts/tasks-reducer/SET_TASKS",$="todolist-ts/tasks-reducer/ADD_TASK",Q="todolist-ts/tasks-reducer/REMOVE_TASK",X="todolist-ts/tasks-reducer/UPDATE_TASK",tt={},et=function(t){return function(e){e(F("loading")),g(t).then((function(n){e(function(t,e){return{type:Y,tasks:t,todoListID:e}}(n.data.items,t)),e(F("succeeded"))}))}},nt=function(t,e){return function(n){n(F("loading")),x(t,e).then((function(t){var e;0===t.data.resultCode?(n((e=t.data.data.item,{type:$,task:e})),n(F("succeeded"))):I(t.data,n)})).catch((function(t){L(t,n)}))}},at=function(t,e){return function(n){n(F("loading")),n(B(e,"loading")),v(t,e).then((function(a){0===a.data.resultCode?(n(function(t,e){return{type:Q,taskID:t,todoListID:e}}(t,e)),n(F("succeeded")),n(B(e,"succeeded"))):(I(a.data,n),n(B(e,"failed")))})).catch((function(t){L(t,n),n(B(e,"failed"))}))}},ct=function(t,e,n){return function(a,c){var i=c().tasks[n].find((function(e){return e.id===t}));if(i){var r=Object(j.a)({description:i.description,title:i.title,status:i.status,priority:i.priority,startDate:i.startDate,deadline:i.deadline},e);a(F("loading")),k(n,t,r).then((function(c){0===c.data.resultCode?(a(function(t,e,n){return{type:X,taskId:t,model:e,todoListID:n}}(t,e,n)),a(F("succeeded"))):(I(c.data,a),a(B(n,"failed")))})).catch((function(t){L(t,a),a(B(n,"failed"))}))}}},it=n(86),rt=n(119),ot=Object(it.b)({tasks:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case Y:return Object(j.a)(Object(j.a)({},t),{},Object(u.a)({},e.todoListID,e.tasks));case $:return Object(j.a)(Object(j.a)({},t),{},Object(u.a)({},e.task.todoListId,[e.task].concat(Object(l.a)(t[e.task.todoListId]))));case Q:return Object(j.a)(Object(j.a)({},t),{},Object(u.a)({},e.todoListID,t[e.todoListID].filter((function(t){return t.id!==e.taskID}))));case X:return Object(j.a)(Object(j.a)({},t),{},Object(u.a)({},e.todoListID,t[e.todoListID].map((function(t){return t.id===e.taskId?Object(j.a)(Object(j.a)({},t),e.model):t}))));case z:var n=Object(j.a)({},t);return e.todolists.forEach((function(t){n[t.id]=[]})),n;case H:return Object(j.a)(Object(j.a)({},t),{},Object(u.a)({},e.todolist.id,[]));case K:var a=Object(j.a)({},t);return delete a[e.id],a;default:return t}},todoLists:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case z:return e.todolists.map((function(t){return Object(j.a)(Object(j.a)({},t),{},{filter:"all",entityStatus:"idle"})}));case H:return[Object(j.a)(Object(j.a)({},e.todolist),{},{filter:"all",entityStatus:"idle"})].concat(Object(l.a)(t));case K:return t.filter((function(t){return t.id!==e.id}));case M:return t.map((function(t){return t.id===e.id?Object(j.a)(Object(j.a)({},t),{},{title:e.title}):t}));case G:return t.map((function(t){return t.id===e.id?Object(j.a)(Object(j.a)({},t),{},{filter:e.filter}):t}));case U:return t.map((function(t){return t.id===e.id?Object(j.a)(Object(j.a)({},t),{},{entityStatus:e.entityStatus}):t}));default:return t}},app:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case _:return Object(j.a)(Object(j.a)({},t),{},{status:e.status});case D:return Object(j.a)(Object(j.a)({},t),{},{error:e.error});case A:return Object(j.a)(Object(j.a)({},t),{},{isInitialized:e.isInitialized});default:return t}},auth:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case S:return Object(j.a)(Object(j.a)({},t),{},{isLoggedIn:e.value});default:return t}}}),st=Object(it.c)(ot,Object(it.a)(rt.a));window.store=st;n(171);var dt=n(231),lt=n(229),ut=n(114),jt=n(55),bt=n(232),ft=n(225),Ot=n(226),ht=n(2),pt=c.a.memo((function(t){var e=t.addItem,n=t.disabled,c=void 0!==n&&n,i=Object(a.useState)(null),r=Object(jt.a)(i,2),o=r[0],s=r[1],d=Object(a.useState)(""),l=Object(jt.a)(d,2),u=l[0],j=l[1],b=function(){var t=u.trim();t?(e(t),j("")):s("Title is required")};return Object(ht.jsxs)("div",{children:[Object(ht.jsx)(bt.a,{size:"small",disabled:c,value:u,onKeyPress:function(t){null!==o&&s(null),"Enter"===t.key&&b()},onChange:function(t){j(t.currentTarget.value)},error:!!o,label:"Title",variant:"outlined",helperText:o&&"Title is required"}),Object(ht.jsx)(ft.a,{disabled:c,color:"primary",onClick:b,children:Object(ht.jsx)(Ot.a,{})})]})})),mt=c.a.memo((function(t){var e=t.value,n=t.changeTitle,c=t.disabled,i=void 0!==c&&c,r=Object(a.useState)(e),o=Object(jt.a)(r,2),s=o[0],d=o[1],l=Object(a.useState)(!1),u=Object(jt.a)(l,2),j=u[0],b=u[1],f=Object(a.useCallback)((function(){b(!0),n(e)}),[n,e]),O=Object(a.useCallback)((function(){b(!1),n(s)}),[n,s]);return j?Object(ht.jsx)(bt.a,{onChange:function(t){d(t.currentTarget.value)},value:s,onBlur:O,onKeyPress:function(t){"Enter"===t.key&&O()},autoFocus:!0,disabled:i}):Object(ht.jsx)("span",{onDoubleClick:f,children:e})})),gt=n(228),xt=n(227),vt=n(234),kt=c.a.memo((function(t){var e=t.task,n=t.removeTask,c=t.changeTaskStatus,i=t.changeTaskTitle,r=t.todoListID,s=t.disabled,d=Object(a.useCallback)((function(){return n(e.id,r)}),[e.id,r,n]),l=Object(a.useCallback)((function(t){var n=t.currentTarget.checked;c(e.id,n?o.Completed:o.New,r)}),[e.id,r,c]),u=Object(a.useCallback)((function(t){i(e.id,t,r)}),[e.id,r,i]);return Object(ht.jsxs)("div",{className:e.status===o.Completed?"is-done":"",children:[Object(ht.jsx)(vt.a,{checked:e.status===o.Completed,onChange:l,color:"primary"}),Object(ht.jsx)(mt,{disabled:"loading"===s,changeTitle:u,value:e.title}),Object(ht.jsx)(ft.a,{disabled:"loading"===s,onClick:d,color:"secondary",children:Object(ht.jsx)(xt.a,{})})]})})),Tt=n(124),yt=n.n(Tt),Ct=c.a.memo((function(t){var e=t.todoList,n=t.tasks,c=t.changeTaskTitle,i=t.deleteTodoList,r=t.removeTask,s=t.changeFilter,l=t.addTask,u=t.changeTaskStatus,j=t.changeTodolistTitle,b=t.demo,f=void 0!==b&&b,O=Object(d.b)();Object(a.useEffect)((function(){f||O(et(e.id))}),[e.id,O,f]);var h=Object(a.useCallback)((function(){return s("all",e.id)}),[s,e.id]),p=Object(a.useCallback)((function(){return s("active",e.id)}),[s,e.id]),m=Object(a.useCallback)((function(){return s("completed",e.id)}),[s,e.id]),g=Object(a.useCallback)((function(){return i(e.id)}),[i,e.id]),x=Object(a.useCallback)((function(t){j(t,e.id)}),[j,e.id]),v=Object(a.useCallback)((function(t){l(t,e.id)}),[l,e.id]),k=n;"completed"===e.filter&&(k=n.filter((function(t){return t.status===o.Completed}))),"active"===e.filter&&(k=n.filter((function(t){return t.status===o.New})));var T=k.map((function(t){return Object(ht.jsx)(kt,{disabled:e.entityStatus,task:t,removeTask:r,todoListID:e.id,changeTaskStatus:u,changeTaskTitle:c},t.id)}));return Object(ht.jsx)("div",{className:yt.a.todolists,children:Object(ht.jsxs)("div",{children:[Object(ht.jsxs)("h3",{children:[Object(ht.jsx)(mt,{value:e.title,changeTitle:x,disabled:"loading"===e.entityStatus}),Object(ht.jsx)(ft.a,{color:"secondary",disabled:"loading"===e.entityStatus,onClick:g,children:Object(ht.jsx)(xt.a,{})})]}),Object(ht.jsx)(pt,{disabled:"loading"===e.entityStatus,addItem:v}),Object(ht.jsx)("div",{style:{listStyle:"none",paddingLeft:"0"},children:T}),Object(ht.jsxs)("div",{children:[Object(ht.jsx)(gt.a,{style:{marginLeft:"3px"},color:"primary",variant:"all"===e.filter?"contained":"outlined",onClick:h,children:"All"}),Object(ht.jsx)(gt.a,{style:{marginLeft:"3px"},color:"primary",variant:"active"===e.filter?"contained":"outlined",onClick:p,children:"Active"}),Object(ht.jsx)(gt.a,{style:{marginLeft:"3px"},color:"primary",variant:"completed"===e.filter?"contained":"outlined",onClick:m,children:"Completed"})]})]})})})),It=n(13),Lt=function(t){var e=t.demo,n=void 0!==e&&e,c=Object(d.c)((function(t){return t.todoLists})),i=Object(d.c)((function(t){return t.tasks})),r=Object(d.c)((function(t){return t.auth.isLoggedIn})),o=Object(d.b)();Object(a.useEffect)((function(){!n&&r&&o(Z())}),[o,n,r]);var s=Object(a.useCallback)((function(t){n||o(V(t))}),[o,n]),l=Object(a.useCallback)((function(t){n||o(J(t))}),[o,n]),u=Object(a.useCallback)((function(t,e){n||o(W(t,e))}),[o,n]),j=Object(a.useCallback)((function(t,e){n||o(function(t,e){return{type:G,id:t,filter:e}}(e,t))}),[o,n]),b=Object(a.useCallback)((function(t,e){n||o(at(t,e))}),[o,n]),f=Object(a.useCallback)((function(t,e){n||o(nt(t,e))}),[o,n]),O=Object(a.useCallback)((function(t,e,a){n||o(ct(t,{status:e},a))}),[o,n]),h=Object(a.useCallback)((function(t,e,a){n||o(ct(t,{title:e},a))}),[o,n]),p=c.map((function(t){return Object(ht.jsx)(lt.a,{item:!0,children:Object(ht.jsx)(ut.a,{elevation:20,style:{padding:"15px",borderRadius:"20px"},children:Object(ht.jsx)(Ct,{todoList:t,deleteTodoList:l,tasks:i[t.id],addTask:f,changeTaskTitle:h,changeTaskStatus:O,removeTask:b,changeFilter:j,changeTodolistTitle:u,demo:n})})},t.id)}));return r?Object(ht.jsxs)(ht.Fragment,{children:[Object(ht.jsx)(lt.a,{container:!0,style:{padding:"20px 0"},children:Object(ht.jsx)(pt,{addItem:s})}),Object(ht.jsx)(lt.a,{container:!0,spacing:3,style:{justifyContent:"space-evenly"},children:p})]}):Object(ht.jsx)(It.a,{to:"/login"})},St=n(133),wt=n.n(St),Et=n(236),_t=n(233);function Dt(t){return Object(ht.jsx)(_t.a,Object(j.a)({elevation:6,variant:"filled"},t))}var At=function(){var t=Object(d.c)((function(t){return t.app.error})),e=Object(d.b)(),n=function(t,n){"clickaway"!==n&&e(P(null))};return Object(ht.jsx)(Et.a,{open:!!t,autoHideDuration:3e3,onClose:n,children:Object(ht.jsx)(Dt,{onClose:n,severity:"error",children:t})})},Nt=n(132),Pt=n.n(Nt),Ft=n(134),Rt=n.n(Ft),zt=n(130),Ht=n.n(zt),Kt=n(129),Mt=n.n(Kt),Gt=n(131),Ut=n.n(Gt),qt=n(128),Bt=n.n(qt),Zt=n(237),Vt=n(224),Jt=n(230),Wt=n(238),Yt=n(135),$t=function(){var t=Object(d.c)((function(t){return t.auth.isLoggedIn})),e=Object(d.b)(),n=Object(Yt.a)({initialValues:{email:"",password:"",rememberMe:!1},validate:function(t){var e={};return t.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(t.email)||(e.email="Invalid email address"):e.email="Email is required",t.password?t.password.length<3&&(e.password="Invalid password address"):e.password="Password is required",e},onSubmit:function(t){e(function(t){return function(e){e(F("loading")),T(t).then((function(t){0===t.data.resultCode?(e(E(!0)),e(F("succeeded"))):I(t.data,e)})).catch((function(t){L(t,e)}))}}(t)),n.resetForm()}});return t?Object(ht.jsx)(It.a,{to:"/"}):Object(ht.jsx)(lt.a,{container:!0,justify:"center",style:{minHeight:"100vh"},children:Object(ht.jsx)(lt.a,{item:!0,xs:4,children:Object(ht.jsx)("form",{onSubmit:n.handleSubmit,children:Object(ht.jsxs)(Zt.a,{children:[Object(ht.jsxs)(Vt.a,{children:[Object(ht.jsxs)("p",{children:["To log in get registered",Object(ht.jsx)("a",{href:"https://social-network.samuraijs.com/",rel:"noreferrer",target:"_blank",children:"here"})]}),Object(ht.jsx)("p",{children:"or use common test account credentials:"}),Object(ht.jsx)("p",{children:"Email: free@samuraijs.com"}),Object(ht.jsx)("p",{children:"Password: free"})]}),Object(ht.jsxs)(Jt.a,{children:[Object(ht.jsx)(bt.a,Object(j.a)({label:"Email",margin:"normal"},n.getFieldProps("email"))),n.errors.email&&n.touched.email&&Object(ht.jsx)("div",{style:{color:"red"},children:n.errors.email}),Object(ht.jsx)(bt.a,Object(j.a)({type:"password",label:"Password",margin:"normal"},n.getFieldProps("password"))),n.errors.password&&n.touched.password&&Object(ht.jsx)("div",{style:{color:"red"},children:n.errors.password}),Object(ht.jsx)(Wt.a,Object(j.a)(Object(j.a)({label:"Remember me",control:Object(ht.jsx)(vt.a,{})},n.getFieldProps("rememberMe")),{},{checked:n.values.rememberMe})),Object(ht.jsx)(gt.a,{type:"submit",variant:"contained",color:"primary",children:"Login"})]})]})})})})},Qt=n(63),Xt=n.n(Qt);var te=function(){return Object(ht.jsxs)("div",{className:Xt.a.wrapper,children:[Object(ht.jsx)("button",{onClick:function(){return Object(ht.jsx)(It.a,{to:"/"})},children:"Redirect to TodolistsList"}),Object(ht.jsx)("div",{className:Xt.a.error,children:"404"}),Object(ht.jsx)("div",{className:Xt.a.errorText,children:"Not found!"}),Object(ht.jsx)("div",{className:Xt.a.errorText2,children:"The resource requested could not be found on this server!"})]})},ee=n(127),ne=n.n(ee),ae=function(t){var e=t.demo,n=void 0!==e&&e,c=Object(d.c)((function(t){return t.app.status})),i=Object(d.c)((function(t){return t.app.isInitialized})),r=Object(d.c)((function(t){return t.auth.isLoggedIn})),o=Object(d.b)();Object(a.useEffect)((function(){o(R())}),[o]);var s=Object(a.useCallback)((function(){o((function(t){t(F("loading")),C().then((function(e){0===e.data.resultCode?(t(E(!1)),t(F("succeeded"))):I(e.data,t)})).catch((function(e){L(e,t)}))}))}),[o]);return i?Object(ht.jsxs)("div",{className:"App",children:[Object(ht.jsx)(Bt.a,{position:"static",style:{backgroundColor:"#345379"},children:Object(ht.jsxs)(Mt.a,{style:{justifyContent:"space-between"},children:[Object(ht.jsx)(Ht.a,{edge:"start",color:"inherit","aria-label":"menu",children:Object(ht.jsx)(dt.a,{})}),Object(ht.jsx)(Ut.a,{variant:"h6",children:"TodoLists"}),r?Object(ht.jsx)(Pt.a,{style:{backgroundColor:"#F50057"},onClick:s,variant:"outlined",color:"inherit",children:"Log Out"}):Object(ht.jsx)("span",{children:"=)"})]})}),"loading"===c&&Object(ht.jsx)(wt.a,{color:"secondary"}),Object(ht.jsx)(At,{}),Object(ht.jsx)(Rt.a,{fixed:!0,children:Object(ht.jsxs)(It.d,{children:[Object(ht.jsx)(It.b,{exact:!0,path:"/",render:function(){return Object(ht.jsx)(Lt,{demo:n})}}),Object(ht.jsx)(It.b,{path:"/login",render:function(){return Object(ht.jsx)($t,{})}}),Object(ht.jsx)(It.b,{path:"/404",render:function(){return Object(ht.jsx)(te,{})}}),Object(ht.jsx)(It.a,{from:"*",to:"/404"})]})})]}):Object(ht.jsx)("div",{style:{display:"flex",justifyContent:"center",height:"100vh",width:"100vw",alignItems:"center"},children:Object(ht.jsx)(ne.a,{disableShrink:!0})})},ce=n(51);r.a.render(Object(ht.jsx)(d.a,{store:st,children:Object(ht.jsx)(ce.a,{children:Object(ht.jsx)(ae,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},63:function(t,e,n){t.exports={wrapper:"Error404_wrapper__21bPj",error:"Error404_error__3vwBG",errorText:"Error404_errorText__3Ncfk",errorText2:"Error404_errorText2__3ezxk"}}},[[197,1,2]]]);
//# sourceMappingURL=main.b590928c.chunk.js.map